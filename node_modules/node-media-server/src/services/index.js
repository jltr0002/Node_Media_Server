const { handleDefaultStream } = require('./default');
const { handleLiveDashStream } = require('./live_dash_handler');

/**
 * Routes the stream handling based on the stream URL.
 * If the URL contains "/stream/", it assumes DASH conversion is needed;
 * otherwise, it uses the default behavior.
 *
 * @param {object} streamInfo - Information about the stream.
 *   - streamInfo.name: The name of the stream (e.g., "test_265")
 *   - streamInfo.url: The full stream URL (e.g., "rtmp://localhost/stream/test_265" or "rtmp://localhost/live/test_265")
 */
function handleStream(streamInfo) {
  if (streamInfo.url.includes('/stream/')) {
    handleLiveDashStream(streamInfo);
  } else {
    handleDefaultStream(streamInfo);
  }
}

module.exports = {
  handleStream,
};
